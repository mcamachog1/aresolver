{% extends "academy/layout.html" %}
{% load static %}

{% block script %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    if (document.querySelector('#boton-inactivar-alumnos') != null)
      document.querySelector('#boton-inactivar-alumnos').addEventListener('click', () => inactivar_alumnos())

    function inactivar_alumnos(){
      fetch('api/inactivar_alumnos')
      .then(response => response.json())
      .then(json => {
          
          console.log(json.message);
      });
    }
  })
</script>
{% endblock %}

{% block body %}
    {% if user.is_authenticated %}
      {% if alumnos %}
        <div id="listar-alumnos">
          <form action="{% url 'index' %}" method="post">
              {% csrf_token %}
              <input name="nombre" type="text" placeholder="Nombre">
              <input name="apellido" type="text" placeholder="Apellido">
              <input type="submit">
            </form>
            <ul>
              {% for alumno in alumnos %}

                <li>{{ alumno.nombre }} {{ alumno.fecha }} {{ alumno.status }}</li>
              {% endfor %}
            </ul>
        </div>
      {% else %}
        <div id="mantenimiento">
          <button id="boton-inactivar-alumnos">Inactivar alumnos</button>
        </div>
      {% endif %}
    {% endif %}
{% endblock %}